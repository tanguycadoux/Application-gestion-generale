{% extends "note_taking/base.html" %}

{% block extra_head %}
    {{ block.super }}
    <title>Liste des notes</title>
{% endblock extra_head %}

{% block content %}
    <h1>Liste des notes</h1>

    <p>
        {{ notes.count }} notes dans la base de donn√©es.
    </p>

    <hr>
    <form method="post" action="{% url 'note_taking:import_note' %}" enctype="multipart/form-data">
        {% csrf_token %}
        <p>
            <label for="note_import">Importer une ou plusieurs notes</label>
            <input type="file" name="note_import" id="note_import" accept=".qmd" multiple>
        </p>
        <button type="submit">Importer</button>
    </form>
    <hr>

    <table class="notes-list-table">
        <thead>
            <tr>
                <th scope="col">
                    <button class="table-head-filter">
                        <span>Date</span>
                        <span>&#9660;</span>
                    </button>
                </th>
                <th scope="col">
                    <button class="table-head-filter">
                        <span>Projets</span>
                        <span>&#9660;</span>
                    </button>
                </th>
            </tr>
        </thead>
        <tbody>
            {% for note in notes %}
                <tr>
                    <th scope="row"><a href="{% url 'note_taking:note_detail' note.pk %}">
                        {{ note.date|date:'D. j M. Y' }}
                    </a></th>
                    <td>
                        {% if note.projects %}
                            <ul class="tags-list">
                                {% for project in note.projects %}
                                    <li><a class="tag" href="{% url 'note_taking:project_detail' project.pk %}">
                                        {{ project }}
                                    </a></li>    
                                {% endfor%}
                            </ul>
                        {% endif %}
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock content %}
